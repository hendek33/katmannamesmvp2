<!DOCTYPE html>
<html>
<head>
    <title>Audio Test</title>
</head>
<body>
    <h1>Audio Test Page</h1>
    <button onclick="testAudio()">Test Audio File</button>
    <button onclick="playWithWebAudio()">Test with Web Audio API</button>
    <audio id="audioElement" controls src="/effects.mp3"></audio>
    
    <script>
        function testAudio() {
            const audio = document.getElementById('audioElement');
            audio.play().then(() => {
                console.log('Audio playing successfully');
            }).catch(error => {
                console.error('Audio play failed:', error);
            });
        }
        
        async function playWithWebAudio() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                console.log('Loading audio file...');
                
                const response = await fetch('/effects.mp3');
                console.log('Response status:', response.status);
                
                const arrayBuffer = await response.arrayBuffer();
                console.log('Array buffer size:', arrayBuffer.byteLength);
                
                const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);
                console.log('Audio decoded! Duration:', audioBuffer.duration);
                
                const source = audioContext.createBufferSource();
                source.buffer = audioBuffer;
                source.connect(audioContext.destination);
                source.start(0);
                
                console.log('Audio started playing!');
            } catch (error) {
                console.error('Web Audio API error:', error);
            }
        }
    </script>
</body>
</html>